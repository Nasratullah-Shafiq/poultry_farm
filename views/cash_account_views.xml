<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <!-- ============================== -->
    <!--  KANBAN VIEW FOR CASH ACCOUNT  -->
    <!-- ============================== -->
    <record id="view_poultry_cash_account_kanban" model="ir.ui.view">
        <field name="name">poultry.cash.account.kanban</field>
        <field name="model">poultry.cash.account</field>
        <field name="arch" type="xml">
            <kanban class="o_kanban_example">
                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_global_click o_kanban_card card-shadow p-3 mb-3"
                             style="border-radius: 12px; transition: transform 0.2s; cursor: pointer; font-size:16px;">

                            <!-- Header: Account Name + Branch -->
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <strong class="h4 text-primary">
                                    <field name="account_no"/>
                                </strong>
                                <span class="badge bg-info text-white" style="font-size: 14px;">
                                    <i class="fa fa-building"></i>
                                    <field name="branch_id"/>
                                </span>
                            </div>

                            <!-- Body Details -->
                            <div class="o_kanban_details mb-2" style="line-height: 1.6;">

                                <!-- Balance -->
                                <div>
                                    <i class="fa fa-wallet text-success"></i>
                                    Balance:
                                    <span class="badge bg-success text-white" style="font-size:14px;">
                                        <field name="balance"/>
                                    </span>
                                </div>

                                <!-- Last Update -->
                                <div>
                                    <i class="fa fa-clock text-secondary"></i>
                                    Last Update:
                                    <field name="last_update"/>
                                </div>

                            </div>

                            <!-- Footer -->
                            <div class="mt-3">
                                <span class="badge bg-secondary">
                                    <i class="fa fa-money-bill"></i>
                                    Cash Account
                                </span>
                            </div>

                        </div>
                    </t>
                </templates>

                <kanban quick_create="true"/>
            </kanban>
        </field>
    </record>


    <!-- ============================== -->
    <!--   CASH ACCOUNT TREE VIEW       -->
    <!-- ============================== -->
    <record id="view_cash_account_tree" model="ir.ui.view">
        <field name="name">poultry.cash.account.tree</field>
        <field name="model">poultry.cash.account</field>
        <field name="arch" type="xml">
            <tree string="Cash Accounts">
                <field name="account_no"/>
                <field name="account_type"/>
                <field name="cashier_id" icon="fa-user"/>
                <field name="balance"/>
                <field name="currency_type"/>

                <field name="last_update"/>
            </tree>
        </field>
    </record>

    <!-- ============================== -->
    <!--   CASH ACCOUNT FORM VIEW       -->
    <!-- ============================== -->
    <record id="view_cash_account_form" model="ir.ui.view">
        <field name="name">poultry.cash.account.form</field>
        <field name="model">poultry.cash.account</field>
        <field name="arch" type="xml">
            <form string="Cash Account">
                 <header>
                <!-- Button to mark account created -->
                <button name="action_mark_created"
                        string="Mark as Account Created"
                        type="object"
                        class="btn-primary"
                        invisible="status != 'new_account'"/>

                <!-- Statusbar -->
                <field name="status"
                       widget="statusbar"
                       statusbar_visible="new_account,account_created"/>
            </header>

            <sheet>
                <widget name="web_ribbon"
                        title="New Account"
                        bg_color="bg-info"
                        invisible="status != 'new_account'"/>

                <widget name="web_ribbon"
                        title="Account Created"
                        bg_color="bg-success"
                        invisible="status != 'account_created'"/>

                    <group string="Cash account information">
                        <field name="account_no"/>
                        <field name="account_type"/>
                        <field name="branch_id" invisible="account_type not in ('main', 'marco', 'bagram')"/>
                        <field name="cashier_id" invisible="account_type != 'cashier'"/>
                        <field name="currency_type"/>
                        <field name="balance" readonly="1"/>

                        <field name="last_update" readonly="1"/>

                    </group>
                </sheet>

                <!-- Chatter -->
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="message_ids"/>
                </div>

            </form>
        </field>
    </record>

    <!-- ============================== -->
    <!--   CASH ACCOUNT SEARCH VIEW     -->
    <!-- ============================== -->
    <record id="view_cash_account_search" model="ir.ui.view">
        <field name="name">poultry.cash.account.search</field>
        <field name="model">poultry.cash.account</field>
        <field name="arch" type="xml">
            <search>
                <field name="account_no"/>
                <field name="branch_id"/>
                <!--                <filter name="positive_balance"/>-->
                <searchpanel>
                    <field name="account_type" icon="fa-sitemap"/>
                    <field name="currency_type" icon="fa-money"/>
                    <field name="cashier_id" icon="fa-user"/>
                </searchpanel>
            </search>
        </field>
    </record>

    <!-- ============================== -->
    <!--   CASH ACCOUNT ACTION          -->
    <!-- ============================== -->
    <record id="action_cash_account" model="ir.actions.act_window">
        <field name="name">Cash Accounts</field>
        <field name="res_model">poultry.cash.account</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="search_view_id" ref="view_cash_account_search"/>
        <field name="context">{'group_by': 'account_type'}</field>
    </record>

    <record id="action_cash_account_bagram" model="ir.actions.act_window">
        <field name="name">Branch Cash Accounts</field>
        <field name="res_model">poultry.cash.account</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="domain">
            [('account_type', '=', 'bagram')]
        </field>
    </record>
    <record id="action_cash_account_marco" model="ir.actions.act_window">
        <field name="name">Branch Cash Accounts</field>
        <field name="res_model">poultry.cash.account</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="domain">
            [('account_type', '=', 'marco')]
        </field>
    </record>
    <record id="action_cash_account_main" model="ir.actions.act_window">
        <field name="name">Branch Cash Accounts</field>
        <field name="res_model">poultry.cash.account</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="domain">
            [('account_type', '=', 'main')]
        </field>
    </record>


    <record id="action_cash_account_cashier" model="ir.actions.act_window">
        <field name="name">Cashier Accounts</field>
        <field name="res_model">poultry.cash.account</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="domain">
            [('account_type', '=', 'cashier')]
        </field>

    </record>


    <!-- Branch -->
    <menuitem id="menu_cash_branch_root"
              name="Branch Account"
              parent="menu_poultry_accounts"
              sequence="10"/>
    <menuitem
            id="menu_cash_main"
            name="Main Branch Accounts"
            parent="menu_cash_branch_root"
            action="action_cash_account_main"
            sequence="20"/>

    <menuitem
            id="menu_cash_marco"
            name="Marco Branch Accounts"
            parent="menu_cash_branch_root"
            action="action_cash_account_marco"
            sequence="20"/>

    <menuitem
            id="menu_cash_bagram"
            name="Bagram Branch Accounts"
            parent="menu_cash_branch_root"
            action="action_cash_account_bagram"
            sequence="20"/>

    <!-- Cashier -->
    <menuitem id="menu_cash_cashier_root"
              name="Cashier Account"
              parent="menu_poultry_accounts"
              sequence="20"/>
    <menuitem
            id="menu_cash_cashier"
            name="Cashier Accounts"
            parent="menu_cash_cashier_root"
            action="action_cash_account_cashier"
            sequence="30"/>
</odoo>
